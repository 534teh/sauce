{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Run Sauce Tests",
			"type": "shell",
			"command": "./launch.sh",
			"group": {
				"kind": "test",
				"isDefault": true
			},
			"presentation": {
				"reveal": "always",
				"panel": "new"
			}
		},
        {
            "label": "docker-build: debug",
            "type": "shell",
            "command": "./build.sh --debug",
            "problemMatcher": []
        },
		{
            "type": "docker-run",
            "label": "docker-run: debug",
            "dependsOn": [
                "docker-build: debug"
            ],
            "dockerRun": {
                "image": "sauce-tests-debug",
                "containerName": "sauce-debug",
                "detached": true,
                "remove": true
            }
        },
        {
            "label": "docker-exec: debug",
            "type": "shell",
            "command": "docker",
            "args": [
                "exec",
                "-e",
                "BROWSER=${input:browser}",
                "-e",
                "VSTEST_HOST_DEBUG=1",
                "-e",
                "VSTEST_HOST_DEBUG_TIMEOUT=3600000",
                "sauce-debug",
                "dotnet",
                "test",
                "--settings",
                "NoDeployment.runsettings"
            ],
            "isBackground": true,
            "dependsOn": [
                "docker-run: debug"
            ],
            "problemMatcher": []
        },
		{
			"label": "docker-stop: debug",
			"type": "shell",
			"command": "docker stop sauce-debug",
			"problemMatcher": []
		}
	],
    "inputs": [
        {
            "id": "browser",
            "type": "pickString",
            "description": "Select the browser to use for testing",
            "options": [
                "chrome",
                "firefox",
                "edge"
            ],
            "default": "chrome"
        }
    ]
}